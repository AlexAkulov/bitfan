{{with (index .Page.Site.Data.processors (.Get 0))}}

<p>{{.Doc}}</p>

<h2>Synopsys</h2>
<table>
	<thead>
		<tr>
			<th>Setting</th>
			<th>Type</th>
			<th>Required</th>
			<th>Default value</th>
		</tr>
	</thead>
	<tbody>
	{{ range .Options.Options }}
	<tr>
		<td>{{.Name | lower}}</td>
		<td>{{.Type}}</td>
		<td>{{if .Required}}yes{{else}}no{{end}}</td>
		<td><code>{{ template "proc-defaultvalue" . }}</code></td>
	</tr>
	{{ end }}
	</tbody>
</table>


<h2>Details</h2>
<p>{{.Options.Doc}}</p>
{{ range .Options.Options }}
	<h3>{{if .Alias}}{{.Alias| lower}}{{else}}{{.Name| lower}}{{end}}</h3>
	{{with .Required}}<li>This is a required setting</li>{{end}}
	<li>Value type is {{.Type}}</li>
	<li>Default value is <code>{{ template "proc-defaultvalue" . }}</code></li>
	<p>{{markdownify (replace .Doc "\n" "\n\n") }}</p>
{{ end }}


<h2>Configuration blueprint</h2>
<pre><code>
{
{{ range .Options.Options }}
{{- template "proc-example" . }}
{{end -}}
}
</code></pre>

{{end}}

{{ define "proc-defaultvalue" -}}
{{- if .DefaultValue -}}
{{- .DefaultValue -}}
{{- else -}}
{{- if eq .Type "array" }} []
{{- else if eq .Type "hash" }} {}
{{- else if eq .Type "string" }} ""
{{- else if eq .Type "int" }} 0
{{- else if eq .Type "int64" }} 0
{{- else if eq .Type "int32" }} 0
{{- else if eq .Type "time.Duration" }} timeDuration
{{- else -}} ?
{{- end -}}
{{- end}}
{{- end }}

{{ define "proc-example" }}
{{- if .ExampleLS }}    # {{delimit (split .Doc "\n") "\n    # "}}
    {{.ExampleLS}}
{{ else }}    # {{delimit (split .Doc "\n") "\n    # "}}
    {{if .Alias}}{{.Alias| lower}}{{else}}{{.Name| lower}}{{end}} => {{- template "proc-defaultvalue" . }}
{{ end -}}

{{ end }}