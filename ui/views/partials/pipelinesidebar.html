{{define "pipelinesidebar"}}
<nav>

<section class="pipeline">
  <h2>{{.pipeline.Label}}</h2>
  {{ template "pipelineactions" .pipeline }}
</section>

<section class="assets">
  <h2>Assets</h2>
  {{ range $asset := .pipeline.Assets }}
  <li>
    <a href="/ui/pipelines/{{$.pipeline.ID}}/assets/{{$asset.ID}}">{{$asset.Name}}</a> 
    <span class="action">
      {{if ne $asset.Type "entrypoint"}}
        <a class="delete" href="/ui/pipelines/{{$.pipeline.ID}}/assets/{{$asset.ID}}/delete">delete</a>
      {{end}}
    </span>
  </li>
  {{ end }}
</section>


<form action="/ui/pipelines/{{$.pipeline.ID}}/assets" class="dropzone" id="my-awesome-dropzone">
  <div class="dz-message needsclick">
    Drop files here or click to upload.<br>
  </div>
</form>


    <script type="text/javascript">
      Dropzone.options.myAwesomeDropzone = {
      paramName: "file", // The name that will be used to transfer the file
      maxFilesize: 2, // MB
      createImageThumbnails: true,
      init: function() {
        this.on("success", function(file, responseText) {
          // Handle the responseText here. For example, add the text to the preview element:
          file.previewTemplate.appendChild(document.createTextNode(responseText));
        });
      },
      accept: function(file, done) {
        if (file.name == "justinbieber.jpg") {
          done("Naha, you don't.");
        }
        else { done(); }
      }
    };
    </script>

</nav>
{{end}}